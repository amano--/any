# update-clinerules.md の差分適用方法

## 1. 手順書の変更箇所

### 1.1 フローチャートの追加位置
```diff
  # Clineルール更新手順（AI用）
  
  ## 0. 重要な前提
  [... 既存の内容 ...]

- ## 1.5 計画書作成フェーズ
+ ## 1. 作業フロー概要
+ 
+ ```mermaid
+ graph TD
+     A[計画書作成] -->|承認必要| B(ユーザー承認)
+     B -->|承認後のみ| C[プレビュー作成]
+     C -->|承認必要| D(ユーザー承認)
+     D -->|承認後のみ| E[.clinerules.ja作成]
+     E -->|承認必要| F(ユーザー承認)
+     F -->|承認後のみ| G[.clinerules作成]
+     G -->|承認必要| H(最終承認)
+ ```
```

### 1.2 プレビュー前提条件の移動
```diff
- ### 4.1 プレビュー作成の前提条件
+ ### 3.1 プレビュー作成の前提条件
  
  1. 計画書の承認確認（必須）
     - すべてのセクションが完了
     - ユーザーの承認取得済み
     - エラー防止メカニズムの準備完了
+    ※承認がない場合は次フェーズに進めない
```

### 1.3 エラー防止と品質保証への変更
```diff
- ## 5. 作業フロー概要
+ ## 5. エラー防止と品質保証
  
  [... 以下、元の内容を維持 ...]
```

### 1.4 エラー防止プロセスの移動
```diff
- ### 1.3 エラー防止プロセス
+ ### 5.3 エラー防止プロセス
  
  1. 事前確認（各フェーズ共通）
     - 前フェーズの承認確認
     - すべてのパスが "docs" から始まることを確認
     - 参照ファイルの存在確認
     - ファイル構造の整合性確認
```

## 2. 変更点の概要

1. 構造的変更
   - フローチャートの追加（可視化の強化）
   - セクションの移動（論理的な配置）
   - エラー防止の集約（管理の効率化）

2. 内容の追加
   - 承認プロセスの明確化
   - エラー防止の強化
   - チェックポイントの具体化

3. 変更時の注意点
   - 既存の内容は維持
   - セクション番号の一貫性確保
   - 参照関係の整合性維持