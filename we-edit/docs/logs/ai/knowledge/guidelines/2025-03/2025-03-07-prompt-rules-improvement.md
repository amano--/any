# プロンプトルール改善に関する知見

## 概要

作業終了時の処理が適切に実行されない問題について、詳細な分析と改善を行いました。

## 発見された課題

### 1. プロンプトの認識問題
- トリガーワードが明確に定義されていなかった
- 実行条件が曖昧
- 作業の優先順位が不明確

### 2. 作業内容の不明確さ
- 必須作業と任意作業の区別がない
- ファイルパスの指定が不統一
- 作業完了の判断基準が不明確

### 3. 品質管理の課題
- 作業結果の確認方法が未定義
- エラー発生時の対処方法が不明
- 成果物の品質基準が不明確

## 改善のポイント

### 1. トリガーワードと条件の明確化
- 「おつかれ」「本日の作業の終了」を正式なトリガーに指定
- 1日の作業の区切りという実行条件を明示
- 作業の優先順位を明確に定義

### 2. 作業内容の構造化
- 必須作業を明確に定義
  - 週次作業ログ（必須）
  - 知見のまとめ（必須）
  - メモリバンク更新（必須）
  - ADR（条件付き）
- 各作業の目的と条件を詳細化
- 具体的なファイルパスの例示

### 3. 品質管理の強化
- チェックリストの導入
  - 前準備の確認項目
  - 作業実行時の確認項目
  - 完了時の確認項目
- エラー防止策の具体化
- 成果物の品質基準の明確化

## 技術的な工夫

### 1. ファイル構造の設計
```
docs/logs/work-log/[YYYY]/             # 週次作業ログ
docs/logs/ai/knowledge/[フェーズ]/     # 知見のまとめ
docs/logs/ai/adr/[フェーズ]/          # ADR（必要時）
```

### 2. テンプレート化
- 各ドキュメントの基本構造を定義
- 必須項目のチェック機能
- 自動生成可能な項目の特定

### 3. 自動化検討
- トリガーワード検出の自動化
- ファイル名生成の自動化
- チェックリストの自動実行

## 得られた知見

### 1. プロンプト設計
- 明確なトリガーワードの重要性
- 条件判断の具体化の必要性
- エラー防止の仕組みの重要性

### 2. ドキュメント管理
- 統一されたファイル構造の重要性
- 命名規則の一貫性の必要性
- バージョン管理の重要性

### 3. 品質保証
- チェックリストの有効性
- 自動化による品質向上
- レビュー基準の明確化

## 今後の展開

### 1. 短期的な改善
- テンプレートの整備
- チェックリストの改善
- エラー検出の強化

### 2. 中期的な計画
- 自動化ツールの開発
- 品質メトリクスの導入
- フィードバックの収集と分析

### 3. 長期的な展望
- AI連携の強化
- プロセスの最適化
- ナレッジベースの構築

## メモリバンク更新のポイント

### systemPatterns.md
- 作業終了処理のパターン追加
- エラー防止パターンの追加
- テンプレート構造の定義

### activeContext.md
- 新しいプロンプトルールの反映
- 作業フローの更新
- 品質基準の更新

### progress.md
- ルール整備の進捗記録
- 改善効果の測定結果
- 次のステップの計画

## 更新履歴

- 2025-03-07: 大幅改訂
  - 課題分析の詳細化
  - 改善策の具体化
  - 技術的知見の追加