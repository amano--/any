# ドメインモデル実装ガイドライン

## 概要

このガイドラインでは、AIによるドメインモデルの実装方法と、コアチームおよび機能開発チームの役割分担について説明します。

## プロジェクト構造

### コアチーム担当範囲

コアチームは以下のディレクトリを担当し、システム全体で重要な概念のドメインモデルを管理します：

```
docs/guidelines/design/modeling/core/[機能名]/
└── domain-design-[モデル名].md  # コアドメインモデルの設計文書

src/core/[機能名]/
├── domain/          # 外部依存のないドメインモデル実装
├── types/           # 型定義
└── tests/           # テストコード

src/common/          # システム全体で使用する共通機能
```

### 機能開発チーム担当範囲

機能開発チームは以下のディレクトリを担当し、各機能固有のドメインモデルを管理します：

```
docs/guidelines/design/modeling/features/[機能名]/
└── domain-design-[モデル名].md  # 機能固有のドメインモデル設計文書

src/features/[機能名]/
├── domain/          # 機能固有のドメインモデル実装
├── types/           # 型定義
└── tests/           # テストコード
```

## 実装プロセス

### 1. 設計ドキュメントの作成

#### コアドメインモデル
```markdown
# domain-design-[モデル名].md

## モデルの責務
- 主要な概念の定義
- ビジネスルール
- 不変条件

## 実装の注意点
- 外部依存を持たない
- テスト容易性の確保
- 型安全性の確保
```

#### 機能固有のドメインモデル
```markdown
# domain-design-[モデル名].md

## モデルの責務
- 機能固有の概念定義
- 機能要件への対応
- コアドメインとの関係

## 実装の注意点
- コアドメインモデルとの整合性
- 機能要件の充足
- テストの網羅性
```

### 2. AIへの実装指示

#### コアドメインモデル
```markdown
# 実装指示

## 参照ドキュメント
1. docs/guidelines/design/modeling/core/[機能名]/domain-design-[モデル名].md
2. docs/[機能名]/logs/ai/plans/impl-plan-[モデル名].md

## 実装要件
1. src/core/[機能名]/domain/ 以下に実装
2. 外部依存を持たないこと
3. Result型でのエラーハンドリング
4. 100%のテストカバレッジ
```

#### 機能ドメインモデル
```markdown
# 実装指示

## 参照ドキュメント
1. docs/guidelines/design/modeling/features/[機能名]/domain-design-[モデル名].md
2. docs/[機能名]/logs/ai/plans/impl-plan-[モデル名].md

## 実装要件
1. src/features/[機能名]/domain/ 以下に実装
2. コアドメインモデルとの整合性確保
3. 機能要件の充足
4. テストの網羅性
```

## 品質基準

### コアドメインモデル
- 外部依存がないこと
- テストの容易性
- 型安全性の確保
- パフォーマンスの最適化
- コードの再利用性

### 機能ドメインモデル
- コアドメインとの整合性
- 機能要件の充足
- テストの網羅性
- エラー処理の一貫性
- メンテナンス性

## チーム間の連携

### コアチームの責務
1. コアドメインモデルの設計と実装
2. 共通機能の提供
3. 機能チームへの技術支援
4. 設計レビューの実施

### 機能チームの責務
1. 機能要件の分析
2. 機能固有のモデル設計
3. コアドメインとの整合性確保
4. 実装とテスト

## 更新履歴

- 2025-03-07: 初版作成
  - プロジェクト構造の定義
  - 実装プロセスの詳細化
  - チーム間の役割分担の明確化