# プロンプトルール集

## 個人情報

teamName core
userName amano

## 1. プロンプトトリガー一覧

### 1.1 定期更新トリガー

1. 定時の週報更新

   - システムが定期的に自動でトリガー
   - トリガー時刻：11:00,15:00,18:00,20:00,23:00
   - 手動トリガー：「週報更新」

2. 作業終了時（トリガー: 「おつかれ」または「本日の作業の終了」）
   - 知見のまとめ作成
   - メモリバンクの更新
   - ADR作成判断と作成（必要な場合のみ）
   - 週報の最終更新

### 1.2 知見更新時（自動検知または「知見更新」）

- トリガー：
  1. 自動検知：以下のキーワードを含む文章を検出した場合
     - 「課題が明確になりました」
     - 「重要な発見がありました」
     - 「知見が得られました」
     - 「改善点が見つかりました」
  2. 手動：「知見更新」というキーワード
- 処理：知見のまとめ作成のみ実行

### 1.3 ADR作成時（自動検知または「ADR作成」）

- トリガー：
  1. 自動検知：以下のキーワードを含む文章を検出した場合
     - 「設計方針を決定しました」
     - 「アーキテクチャの変更を決定」
     - 「重要な決定を行いました」
     - 「〜に変更することにしました」
     - 「〜という方針で進めます」
  2. 手動：「ADR作成」というキーワード
- 処理：ADR作成のみ実行

### 1.4 ガイドライン改訂時（トリガー: 「ガイド改訂」）

1. 作業の振り返りと熟考
2. 既存ガイドラインを踏襲した改訂

## 2. 各作業の詳細

### 2.1 知見のまとめ作成

```
場所: docs/[teamName]/logs/ai/knowledge/[開発フェーズ]/YYYY-MM/YYYY-MM-DD-[内容のタイトルの英名].md
手順:
1. まとめ作業前の振り返り
   - 実施内容の全体像を確認
   - 重要な判断ポイントを列挙
   - 発生した課題を整理

2. 熟考のプロセス
   - 各判断の根拠を深掘り
   - 選択肢と比較検討内容を整理
   - 得られた教訓を分析

3. まとめ作成
   - 具体的な課題と解決策
   - 技術的な判断とその根拠
   - 改善案や代替案の検討内容
   - 次のステップへの提案
```

### 2.2 メモリバンクの更新

### 2.3 ADR作成

```
場所: docs/[teamName]/logs/ai/adr/[ADRステータス]/[開発フェーズ]/YYYY/YYYY-MM-DD-[決定内容の英名].md

ADRステータス:
- proposed: 提案中
- accepted: 承認済み
- rejected: 却下
- deprecated: 廃止
- superseded: 代替案採用

条件: 以下のいずれかに該当する決定の場合に作成
1. アーキテクチャに影響する決定
   - システム構造の変更
   - コンポーネント間の関係性の変更
   - 重要なインターフェースの変更

2. 重要なパターンや規約の変更
   - 設計パターンの採用
   - コーディング規約の変更
   - 命名規則の変更

3. チーム間の協業方法の変更
   - 開発プロセスの変更
   - コミュニケーション方法の変更
   - 役割分担の変更

4. システム全体に影響する技術選定
   - フレームワークの選定
   - ライブラリの採用
   - ツールチェーンの変更

記録項目：
1. ステータス（proposed/accepted/rejected/deprecated/superseded）
2. 決定に至った背景と理由
3. 検討した代替案
4. 影響範囲の分析
5. 実装手順
```

### 2.4 週報作成・更新

```
場所: docs/[teamName]/logs/work-log/[userName]/[YYYY]/YYYY-MM_[週の番号].md
注: 週の番号は月の最初の週を1とし、以降順番に2,3,4...と指定

更新タイミング:
1. 2時間ごとの定期更新（9:00-21:00）
2. 作業終了時の最終更新

記録内容:
1. 実施内容の収集
   - 前回の記録時からの作業を確認（2時間分）
   - コミットログの確認
   - 作成・更新したファイルの確認
   - AIとの対話履歴の確認

2. 記録項目
   - タイムスタンプ（YYYY-MM-DD HH:MM）
   - 作業実施時間（HH:MM-HH:MM）
   - 作業内容の要約（2時間分の作業）
   - 成果物への参照リンク（存在確認必須）
     - 作成した知見へのリンク
     - 作成したADRへのリンク（存在する場合）
     - 作成・更新したコードへのリンク
     - 作成・更新した資料へのリンク
   - 課題と次のステップ

3. リンク確認プロセス
   1. 各リンク先ファイルの存在確認
   2. 存在しない場合:
      - ユーザーに移動または削除の確認
      - 正しいパスの提供を要求
      - 更新された情報で週報を修正

記録フォーマット:

## YYYY-MM-DD
### HH:MM 更新

作業時間: HH:MM-HH:MM

#### 実施内容
- 作業内容の要約
- 具体的なタスク

#### 成果物
- [成果物名](リンク)
- [知見タイトル](リンク)
- [ADRタイトル](リンク)

#### 課題・次のステップ
- 現在の課題
- 次の作業予定

週番号の計算例:
- 3/1-3/7   → YYYY-MM_1.md
- 3/8-3/14  → YYYY-MM_2.md
- 3/15-3/21 → YYYY-MM_3.md
- 3/22-3/28 → YYYY-MM_4.md
- 3/29-3/31 → YYYY-MM_5.md
```

## 更新履歴

- 2025-03-08: メジャー改訂

  - 週報の更新頻度を2時間ごとに変更
  - 週報のフォーマットを時系列形式に変更
  - タイムスタンプ付きの記録形式を追加

- 2025-03-07: 改訂

  - ADRのパス構造を変更
  - ADRステータスを最上位ディレクトリに

- 2025-03-07: 全面改訂
  - プロンプトトリガー一覧を再整理
  - 知見更新の自動検知を追加
  - ADR作成の自動検知を追加
  - 週報作成プロセスを詳細化
  - 週番号の計算方法を明確化
