# AI開発支援者のためのプロジェクトガイドライン

## 概要

このガイドラインは、AIを活用したソフトウェア開発プロセスを標準化し、プロジェクトの品質と一貫性を確保することを目的としています。

## 1. 実装計画書の作成と管理

### 基本ルール

- 新規実装の開始時に実装計画書を必ず作成すること
- 保存場所: 対象ファイルと同じディレクトリの `[機能名]/logs/ai/YYYY-MM` フォルダー内
- ファイル命名規則: `YYYY-MM-DD_HH_MM-実装計画名.md`
- ソースコード末尾に実装計画書へのリンクをマークダウン形式で必ずコメントとして記載

### 実装計画書の構成

```markdown
# 実装計画: [機能名]

作成日: YYYY-MM-DD HH:MM

## 1. 概要

- 実装する機能の簡潔な説明
- 目的と期待される効果

## 2. 技術的アプローチ

- 選択した実装方法の説明
- 使用する技術やライブラリ
- アーキテクチャ上の配置

## 3. タスク分割

- [ ] タスク1: 説明
- [ ] タスク2: 説明
  - [ ] サブタスク2.1
  - [ ] サブタスク2.2

## 4. 考慮事項

- パフォーマンス要件
- セキュリティ要件
- スケーラビリティ要件

## 5. テスト計画

- 単体テストの範囲
- 統合テストの範囲
- E2Eテストの範囲
```

## 2. ドキュメント管理

### 文書の種類と配置

- 関連ドキュメントも `[機能名]/logs/ai/YYYY-MM` フォルダーに保存
- 同一の命名規則を適用: `YYYY-MM-DD_HH_MM-ドキュメント名.md`
- ドキュメント間の関連性を明確に記載

### ドキュメント構造

- 目的と範囲の明確な記述
- 技術的な詳細と根拠の説明
- 関連する実装計画書や他のドキュメントへの参照
- 更新履歴の管理

## 3. コメント記述ガイドライン

### 実装計画書リンクの管理

コンポーネントの先頭には現在の実装計画書のリンクのみを記載し、実装履歴は最下部に記載します：

先頭：

```typescript
/**
 * [実装計画書](./実装計画書への相対パス)
 */
```

最下部：

```typescript
/**
 * 実装履歴:
 * - 2025-03-02: [実装計画書](./path/to/latest.md) - 3パネルレイアウトの実装
 * - 2025-03-01: [実装計画書](./path/to/old.md) - カード表示の追加
 */
```

- マークダウンリンク形式で記述
- 履歴は新しい順に記載
- 日付と変更概要を含める

### コンポーネント構成の記録

```typescript
/**
 * @ai_component_structure
 * レイアウト構成:
 * - [コンポーネント名]: [役割]
 *   - [子コンポーネント1]: [役割]
 *   - [子コンポーネント2]: [役割]
 *
 * 状態管理:
 * - [状態名]: [用途]
 *
 * イベントハンドラ:
 * - [イベント名]: [処理内容]
 */
```

### AIの意思決定プロセスの記録

```typescript
/**
 * @ai_decision
 * 選択した実装アプローチ: [アプローチ名]
 * 理由:
 * 1. [理由1の説明]
 * 2. [理由2の説明]
 *
 * 検討した代替案:
 * - 案1: [説明] - 不採用理由: [理由]
 * - 案2: [説明] - 不採用理由: [理由]
 */
```

### 実装の説明

```typescript
/**
 * @ai_implementation
 * 機能: [機能の説明]
 * アルゴリズム: [使用しているアルゴリズムの説明]
 * パフォーマンス考慮:
 * - [パフォーマンスに関する考慮事項1]
 * - [パフォーマンスに関する考慮事項2]
 */
```

## 4. コード実装時の注意事項

### 機能ブロックの文書化

- 各機能の目的と役割を明確に説明
- 入力と出力の仕様を記載
- 依存関係の明示
- エラーハンドリングの方針

### パフォーマンス最適化

- クリティカルパスの特定と文書化
- パフォーマンスメトリクスの設定
- 最適化の根拠と効果の記録

### テスト戦略

- テストケースの選定理由
- エッジケースの考慮
- 自動化テストの範囲と手動テストの範囲

## 5. プロジェクト品質維持のためのベストプラクティス

### コードレビューチェックリスト

- [ ] 実装計画書との整合性
- [ ] AIの意思決定プロセスの明確な記録
- [ ] パフォーマンス要件の充足
- [ ] セキュリティ考慮事項の実装
- [ ] テストの網羅性
- [ ] ドキュメントの更新

### 技術的負債の管理

- 技術的負債の特定と記録
- 優先順位付けと対応計画
- 定期的なレビューと更新

## 6. コミット管理

### コミットメッセージの形式

```bash
# プレフィックス規則
# feat: 新機能
# fix: バグ修正
# refactor: リファクタリング
# docs: ドキュメント
# test: テスト関連
# chore: その他の変更

feat: 機能名や変更内容の要約

- 詳細な変更点1
- 詳細な変更点2
- 詳細な変更点3

改善点：
- 技術的な改善点
- パフォーマンスの改善
- ドキュメントの更新

🤖 ${K4}で生成
Co-Authored-By: Claude <noreply@anthropic.com>
```

### コミットの粒度

- 1つの機能または改善につき1つのコミット
- 関連する変更はまとめて1つのコミットに
- テストとドキュメントは実装と同じコミットに含める

### コミットの確認項目

- [ ] 適切なプレフィックスを使用している
- [ ] 変更内容が明確に説明されている
- [ ] 改善点が明記されている
- [ ] 関連するテストとドキュメントが含まれている
- [ ] AIによる生成であることが明記されている

## 7. 継続的改善

### 振り返りと教訓

- 実装完了後のレビュー実施
- 成功点と課題点の記録
- 改善提案の収集

### パフォーマンス測定

- 定量的指標の設定と測定
- ベンチマーク結果の記録
- 改善の効果検証

### ナレッジベース

- 共通の課題と解決策の蓄積
- ベストプラクティスの更新
- チーム間での知見共有

## AI実装ガイドラインの場所

AI用の詳細な実装ガイドラインは以下の場所にあります：

```
docs/ai/guidelines/
├── execution.md  # 実行プロトコル
├── validation.md # 検証ルール
└── errors.md     # エラー処理
```

**注意**: これらのファイルはAI実行用に最適化されており、人間が直接読むことは意図していません。

## ガイドライン作成・更新の手順

AI実装ガイドラインを作成・更新する場合は、以下のドキュメントを参照してください：

- docs/ai/ai-guidelines-creation.md

## メモリバンクとの連携

AIの実装は常にメモリバンク（.cline/memory/）と連携して動作します。
新しいガイドラインを追加した場合は、以下の更新が必要です：

1. systemPatterns.mdにガイドラインの存在を記録
2. activeContext.mdに変更内容を反映
3. progress.mdに進捗を記録

## 実装の優先順位

1. 型安全性
2. メモリ管理
3. エラー処理
4. パフォーマンス最適化

## ログと記録

AIの実装に関するログは以下の場所に保存されます：

- docs/logs/ai/: 実装ログ
- docs/logs/ai/adr/: アーキテクチャ決定記録

## 関連ファイル

- .clinerules: プロジェクト固有のルール
- docs/guidelines/\*.md: 人間向けガイドライン

## 更新履歴

- 2025-03-03: AI実装ガイドラインを docs/ai/guidelines/ に移動・構造化
- 2025-03-03: 実行プロトコル、検証ルール、エラー処理を分離
