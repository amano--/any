# 文書トレーサビリティガイドライン

## 概要

このガイドラインは、実装プロセスにおける各文書間の関連性を管理し、要件から実装までの追跡可能性を確保するための規則を定義します。

## 文書階層構造

```
docs/
├── usecases/
│   ├── [機能名].md                        # ユースケース記述
│   └── features/
│       └── [機能名]/
│           └── YYYY-MM-DD_[計画名].md     # ユースケース実装計画書
└── features/
    └── [機能名]/
        └── logs/
            └── plan/
                └── YYYY-MM/
                    └── YYYY-MM-DD_[計画名].md  # 機能実装指示書
```

## 文書間の参照規則

### 1. 文書識別子
```markdown
<!-- 文書の先頭に配置 -->
---
id: DOC-[機能名]-[種別]-[YYYYMMDD]-[連番]
type: [usecase|plan|instruction]
feature: [機能名]
version: 1.0.0
---
```

### 2. 関連文書の参照
```markdown
## 関連文書
- 親文書: [文書タイトル](リンク) (DOC-ID)
- 参照文書:
  - [文書タイトル](リンク) (DOC-ID)
  - [文書タイトル](リンク) (DOC-ID)
- 子文書: [文書タイトル](リンク) (DOC-ID)
```

## 要件追跡マトリクス

### 1. マトリクスの構造
```markdown
| 要件ID | ユースケースID | 実装計画ID | 実装指示ID | ステータス |
|--------|---------------|------------|------------|------------|
| REQ-001| UC-001       | PLAN-001   | INST-001   | 完了       |
```

### 2. 更新ルール
- 新規文書作成時に追加
- ステータス変更時に更新
- 関連文書の変更時に確認

## 変更管理

### 1. バージョン管理
```markdown
## 変更履歴
| バージョン | 日付       | 変更者 | 変更内容 |
|------------|------------|---------|----------|
| 1.0.0      | YYYY-MM-DD | 作成者  | 初版作成 |
```

### 2. 変更の影響範囲
```markdown
## 影響範囲
- 影響を受ける文書
  - [文書タイトル](リンク) (影響の内容)
- 必要な更新
  - [ ] 文書Aの更新
  - [ ] 文書Bの確認
```

## リンク管理

### 1. 相対パスの使用
```markdown
- 同一機能内: `./[ファイル名].md`
- 上位ディレクトリ: `../[ディレクトリ]/[ファイル名].md`
- ルートからの参照: `/docs/[パス]/[ファイル名].md`
```

### 2. リンク検証
- コミット前のリンク有効性確認
- 定期的なリンク切れチェック
- 自動検証ツールの利用

## 文書テンプレート

### 1. 共通ヘッダー
```markdown
---
id: DOC-[ID]
title: [タイトル]
feature: [機能名]
type: [文書種別]
version: [バージョン]
created: [作成日]
updated: [更新日]
---

## 概要
[文書の目的と概要]

## 関連文書
[関連文書の一覧]

## 本文
[文書の主要な内容]
```

### 2. 共通フッター
```markdown
---
## レビュー履歴
| レビュー日 | レビュアー | 結果 | コメント |
|------------|------------|------|----------|

## 承認
- [ ] 技術レビュー完了
- [ ] 機能レビュー完了
- [ ] 文書管理者承認
```

## 文書メンテナンス

### 1. 定期レビュー
- 3ヶ月ごとの文書内容確認
- リンク有効性の確認
- 最新技術との整合性確認

### 2. 更新トリガー
- 要件の変更
- 技術スタックの更新
- フィードバックの反映

### 3. アーカイブ規則
- 非アクティブ化の基準
- アーカイブ方法
- 履歴の保持期間

## チェックリスト

### 1. 文書作成時
- [ ] 文書識別子の付与
- [ ] 関連文書の参照確認
- [ ] テンプレートの適用確認
- [ ] リンクの有効性確認

### 2. 文書更新時
- [ ] バージョン番号の更新
- [ ] 変更履歴の記録
- [ ] 影響範囲の確認
- [ ] 関連文書の更新

### 3. 文書レビュー時
- [ ] 内容の正確性
- [ ] 関連文書との整合性
- [ ] リンクの有効性
- [ ] フォーマットの一貫性

## 補足情報

### 1. 命名規則
- ファイル名: `YYYY-MM-DD_[説明的な名前].md`
- 文書ID: `DOC-[機能名]-[種別]-[YYYYMMDD]-[連番]`
- ディレクトリ: キャメルケース

### 2. 文書の格納場所
- 各文書種別に応じた所定のディレクトリに保存
- 機能ごとのサブディレクトリを作成
- 日付ベースのバージョン管理

### 3. ツール連携
- GitHubでの変更管理
- CI/CDでの自動検証
- ドキュメント生成ツールの活用