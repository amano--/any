# AIによるコーディングルール

## 1. 基本原則

### 1.1 実装計画書の作成

- 新規実装時は必ず実装計画書を作成
- 保存場所: `[機能名]/logs/ai/YYYY-MM`
- ファイル名: `YYYY-MM-DD_HH_MM-実装計画名.md`
- ソースコード末尾に実装計画書へのリンクを記載

### 1.2 ドキュメント構造

```markdown
# 実装計画: [機能名]

作成日: YYYY-MM-DD HH:MM

## 1. 概要

- 機能の説明
- 目的と効果

## 2. 技術的アプローチ

- 実装方法
- 使用技術
- アーキテクチャ

## 3. タスク分割

- [ ] タスク1
  - [ ] サブタスク1.1

## 4. 考慮事項

- パフォーマンス
- セキュリティ
- スケーラビリティ

## 5. テスト計画

- 単体テスト
- 統合テスト
- E2Eテスト
```

## 2. コードコメント規則

### 2.1 実装計画書リンク

```typescript
/*
 * [実装計画書](実装計画書への相対パス)
 */

// 最下部に実装履歴
/*
 * 実装履歴:
 * - 2025-03-02: [実装計画書](path/to/latest.md) - 機能追加
 */
```

### 2.2 コンポーネント構造

```typescript
/**
 * @ai_component_structure
 * レイアウト:
 * - [コンポーネント]: [役割]
 *   - [子コンポーネント]: [役割]
 *
 * 状態管理:
 * - [状態名]: [用途]
 */
```

### 2.3 意思決定プロセス

```typescript
/**
 * @ai_decision
 * アプローチ: [選択した実装方法]
 * 理由:
 * 1. [理由1]
 * 2. [理由2]
 *
 * 代替案:
 * - [案1]: [不採用理由]
 */
```

## 3. AI特有の考慮事項

### 3.1 コンテキスト管理

1. メモリバンクの確認

   - 実装前に全ファイルを確認
   - コンテキストの整合性を検証
   - 依存関係の把握

2. トークン制限対策

   - 大規模なファイルは分割して処理
   - 必要な情報のみを保持
   - 定期的なコンテキストのクリーンアップ

3. エラー検出と回復
   - 実装途中での中断への対応
   - バックアップ計画の準備
   - 復旧手順の文書化

### 3.2 品質管理

1. 型安全性

   - 厳格な型チェック
   - nullチェックの徹底
   - 型推論の活用

2. テスト自動生成

   - エッジケースの網羅
   - 異常系テストの自動生成
   - パフォーマンステストの組み込み

3. ドキュメント生成
   - インラインコメントの自動生成
   - API仕様書の自動更新
   - 使用例の提供

## 5. プロジェクト品質管理

### 5.1 レビューチェックリスト

- [ ] 実装計画書との整合性
- [ ] 意思決定プロセスの記録
- [ ] パフォーマンス要件の充足
- [ ] テストの網羅性
- [ ] ドキュメントの更新

### 5.2 技術的負債の管理

- 負債の特定と記録
- 優先順位付け
- 定期的なレビュー
