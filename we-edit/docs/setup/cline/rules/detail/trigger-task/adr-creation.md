# ADR作成タスク

## 0. AI重要ルール

### 0.1 ADR記録の必須チェック

AIは以下の場合にADRの作成が必要か確認を行う：

1. アーキテクチャに影響する決定時
2. 重要なパターンや規約の変更時
3. チーム間の協業方法の変更時
4. システム全体に影響する技術選定時

### 0.2 記録確認手順

1. 決定内容の重要度確認
2. 影響範囲の分析
3. ステータスの判断
4. 記録の必要性判断
5. ADRの作成実行

## 1. ファイル名と場所

```
場所: docs/team/[teamName]/logs/ai/adr/[ADRステータス]/[開発フェーズ]/YYYY/YYYY-MM-DD-[決定内容の英名].md

ADRステータス:
- proposed: 提案中
- accepted: 承認済み
- rejected: 却下
- deprecated: 廃止
- superseded: 代替案採用

例：
- 設計方針の決定 → /accepted/phase1/2025/2025-03-09-api-design-pattern.md
- フレームワーク選定 → /proposed/setup/2025/2025-03-09-frontend-framework.md
```

## 2. 作成条件

### 2.1 アーキテクチャへの影響

1. システム構造の変更
   - コンポーネント構成の変更
   - レイヤー構造の修正
   - 依存関係の再定義

2. コンポーネント間の関係性の変更
   - インターフェースの変更
   - 通信方式の変更
   - データフローの変更

3. 重要なインターフェースの変更
   - API設計の変更
   - プロトコルの変更
   - データ構造の変更

### 2.2 パターンと規約の変更

1. 設計パターンの採用
   - アーキテクチャパターン
   - デザインパターン
   - 実装パターン

2. コーディング規約の変更
   - 命名規則
   - フォーマットルール
   - コメント規約

### 2.3 チーム協業方法の変更

1. 開発プロセスの変更
   - ワークフロー
   - レビュー方法
   - リリース手順

2. コミュニケーション方法の変更
   - 会議体制
   - 報告方法
   - ツール利用

### 2.4 技術選定

1. フレームワークの選定
   - 主要フレームワーク
   - サブフレームワーク
   - 開発支援ツール

2. ライブラリの採用
   - 外部ライブラリ
   - 内製ライブラリ
   - ツールチェーン

## 3. 作成手順

### 3.1 基本手順

1. 決定内容の分析

   - 背景と理由の整理
   - 影響範囲の特定
   - ステークホルダーの確認

2. 代替案の検討

   - 選択肢の列挙
   - 比較評価
   - トレードオフの分析

3. 記録の作成

   - ステータスの設定
   - 背景と理由の記述
   - 影響分析の記録
   - 実装手順の説明

### 3.2 チェックリスト

作成時に確認する項目：

```markdown
決定分析確認:

- [ ] 決定の背景は明確か
- [ ] 影響範囲を把握したか
- [ ] ステークホルダーを特定したか

代替案確認:

- [ ] 十分な選択肢を検討したか
- [ ] 比較評価は適切か
- [ ] トレードオフを分析したか

記録確認:

- [ ] ステータスは適切か
- [ ] 背景と理由は明確か
- [ ] 影響分析は十分か
- [ ] 実装手順は具体的か
```

## 4. エラー処理

### 4.1 記録失敗時の対応

1. 一時ファイルとしての保存
2. ユーザーへの通知
3. 記録再開のタイミング調整

### 4.2 内容不足時の対応

1. 不足情報の特定
2. 追加情報の収集
3. 再記録の実施

### 4.3 フォーマット不整合時

1. 一時保存の実施
2. フォーマットの修正
3. 再記録の実行