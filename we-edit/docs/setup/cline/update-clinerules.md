# Clineルール更新手順（AI用）

## 0. 重要な前提

- ルールのメンテナンスはユーザーの責任です
- AIは更新作業のみを担当します
- 常に既存のルールに従って作業します

## 1. 基本的な更新フロー

### 1.1 既存ルールの確認

1. .clinerules の確認
   ```bash
   cat .clinerules
   ```

2. 関連する既存タスク定義の確認
   ```
   docs/setup/cline/rules/task/
   docs/setup/cline/rules/en/task/
   ```

### 1.2 英語版の作成

1. 既存ルールを基にした英語版の作成
   - 簡潔な表現を使用
   - トークン数を最小限に抑制
   - 技術的な正確性を維持

2. 配置場所
   ```
   docs/setup/cline/rules/en/[カテゴリ]/[ファイル名].md
   ```

### 1.3 .clinerules の更新

1. mk-clinerules.sh の実行
   ```bash
   cd docs/setup/cline
   ./mk-clinerules.sh
   ```

2. 結果の確認
   - 更新された .clinerules の内容確認
   - リンクの有効性確認
   - フォーマットの正確性確認

## 2. ルール改善命令への対応

### 2.1 改善要求の受信時

1. 要求の分析
   - 改善が必要な箇所の特定
   - 影響範囲の確認
   - 既存ルールとの整合性確認

2. 改善案の作成
   - 英語版での改善案作成
   - トークン効率を考慮
   - 明確な改善理由の記述

3. レビュー依頼
   ```markdown
   以下の改善案を提案します：

   1. 改善内容
      - 変更箇所：[ファイルパス]
      - 現在の記述：[該当部分]
      - 改善案：[新しい記述]

   2. 改善理由
      - [具体的な理由]
      - [期待される効果]

   3. 影響範囲
      - [影響を受けるファイル]
      - [変更が必要な関連ルール]
   ```

### 2.2 承認後の実装

1. 英語版の更新
   - 承認された改善内容の実装
   - トークン効率の確認

2. 日本語版の更新
   - 英語版を基にした更新
   - 必要な補足説明の追加

3. .clinerules の更新実行

## 3. エラー発生時の対応

### 3.1 構文エラー

1. エラーメッセージの解析
2. 該当箇所の修正
3. 再実行

### 3.2 リンクエラー

1. パスの確認
2. ファイルの存在確認
3. 相対パスの修正

### 3.3 フォーマットエラー

1. Markdown構文の確認
2. インデントの修正
3. 空行の調整

## 4. コミット手順

### 4.1 コミットメッセージ形式

```
feat(rules): ルールの変更内容を簡潔に

- 変更点1
- 変更点2
- 変更点3

# プロンプト履歴

1. Q: [ユーザーからの指示]
   A: [AIの対応内容]
```

### 4.2 実行コマンド

```bash
git add docs/setup/cline/rules/en/[変更ファイル]
git add docs/setup/cline/rules/[変更ファイル]
git add .clinerules
git commit -m "[コミットメッセージ]"
