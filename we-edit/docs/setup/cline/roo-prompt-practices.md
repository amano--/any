# Roo特化型プロンプトエンジニアリングのベストプラクティス

## 1. モード活用の最適化

### 1.1 適切なモードの選択

- **Code Mode**: コーディングや実装タスク
  ```markdown
  例: "TypeScriptでカスタムフックを実装して"
  ```

- **Architect Mode**: 設計や構造化
  ```markdown
  例: "このプロジェクトのディレクトリ構造を見直して"
  ```

- **Ask Mode**: 質問や情報収集
  ```markdown
  例: "Reactの最新バージョンの機能について教えて"
  ```

- **Debug Mode**: 問題解決やデバッグ
  ```markdown
  例: "このエラーメッセージの原因を特定して"
  ```

### 1.2 モード切り替えの最適化

- タスクの性質に応じて適切なモードを選択
- 複合的なタスクは段階的にモードを切り替え
- 各モードの特性を活かした指示の出し方

## 2. ツール活用の最適化

### 2.1 ファイル操作系ツール

- **read_file**: 既存コードの分析時
  ```markdown
  - 大規模ファイルは避け、必要な部分のみ確認
  - コンテキスト理解のための段階的な読み込み
  ```

- **write_to_file**: 新規ファイル作成時
  ```markdown
  - 完全な内容を一度に提供
  - 行数の正確なカウント
  ```

- **apply_diff**: コード修正時
  ```markdown
  - 正確な行番号の指定
  - 既存コードの厳密なマッチング
  ```

### 2.2 検索・分析系ツール

- **search_files**: コードベース検索時
  ```markdown
  - 適切な正規表現の使用
  - ファイルパターンの効果的な指定
  ```

- **list_code_definition_names**: コード構造把握時
  ```markdown
  - モジュール間の依存関係の分析
  - リファクタリングの計画立案
  ```

## 3. コンテキスト管理の最適化

### 3.1 環境情報の活用

- VSCode Visible Filesの確認
- 開いているタブの把握
- 現在の作業ディレクトリの理解

### 3.2 メモリ管理

- コンテキストサイズの監視
- 重要情報の優先的な保持
- 必要に応じたコンテキストのリフレッシュ

## 4. タスク実行の最適化

### 4.1 段階的アプローチ

1. タスク分析
   - 目的の明確化
   - 必要なステップの特定
   - 依存関係の把握

2. 実行計画
   - ツールの選択
   - 実行順序の決定
   - エラー処理の準備

3. 段階的実行
   - 1ステップずつの実行
   - 結果の確認
   - 必要に応じた計画の調整

### 4.2 エラー処理とリカバリー

- エラーメッセージの適切な解釈
- 代替アプローチの準備
- ユーザーとの効果的なコミュニケーション

## 5. コミュニケーションの最適化

### 5.1 プロンプト構造

```markdown
<task>
具体的な指示
</task>

オプション:
- 優先順位
- 制約条件
- 期待される出力形式
```

### 5.2 フィードバックの活用

- ユーザーの意図の正確な理解
- 提案された修正の迅速な適用
- 継続的な改善プロセスの維持

## 6. MCP操作の最適化

### 6.1 ツール利用

- **use_mcp_tool**: 
  ```markdown
  - 適切なサーバーとツールの選択
  - パラメータの正確な指定
  - 結果の適切な処理
  ```

### 6.2 リソースアクセス

- **access_mcp_resource**:
  ```markdown
  - リソースURIの正確な指定
  - レスポンスの効果的な活用
  ```

## 7. プロジェクト固有の最適化

### 7.1 .clinerules の活用

- プロジェクト固有のルールの理解
- コミットメッセージの規約遵守
- 文書化要件の遵守

### 7.2 チーム規約の遵守

- コーディング規約の遵守
- レビュープロセスの尊重
- ドキュメント規約の遵守

## 8. パフォーマンス最適化

### 8.1 応答時間の最適化

- 必要最小限のツール使用
- 効率的なファイル操作
- 適切なバッチ処理

### 8.2 リソース使用の最適化

- メモリ使用量の管理
- コンテキストサイズの制御
- 適切なキャッシュ戦略

## 9. セキュリティ考慮事項

### 9.1 機密情報の取り扱い

- 環境変数の適切な使用
- 機密ファイルの除外
- セキュアな通信の確保

### 9.2 アクセス制御

- 適切な権限レベルの維持
- セキュリティ境界の尊重
- 監査ログの維持

## 10. トラブルシューティング

### 10.1 一般的な問題

- コンテキスト喪失への対応
- ツールエラーの解決
- 依存関係の問題解決

### 10.2 回復戦略

- バックアップの活用
- 代替アプローチの適用
- エスカレーションパスの把握