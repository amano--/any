# 手順書とテンプレート改善提案 v4

## 1. docs/setup/cline/rules配下の現状と課題

### 1.1 現状の構造（existing/）

```
docs/setup/cline/rules/
├── 00-personal.md
├── 01-team.md
└── 02-project.md
```

### 1.2 現状の課題
- テンプレートとしての抽象度が不適切
- ファイル構造の動的確認機能の不足
- エラー防止メカニズムの弱さ

### 1.3 改善後の構造（new/）

```
docs/setup/cline/rules/
├── 00-personal.md （抽象化されたテンプレート）
├── 01-team.md （抽象化されたテンプレート）
└── 02-project.md （動的構造確認機能付き）
```

## 2. 具体的な更新内容

### 2.1 00-personal.mdの更新

#### 現状
```markdown
# 個人ルール設定
- 具体的なパス例が含まれている
- 特定の設定に依存した記述
- 固定的な構造
```

#### 更新後
```markdown
# 個人ルール設定

## 1. [理解度確認セクション]

### 1.1 [確認対象定義]
[メンバー固有のルールパスを定義]

### 1.2 [判定基準定義]
[完全理解/部分理解/不十分の基準を定義]

### 1.3 [重点項目定義]
[環境設定/ワークフロー/プラグイン等の項目を定義]

## 2. [階層定義セクション]
[個人/チーム/プロジェクトの各階層の関係を定義]

## 3. [エラー対応セクション]
[理解度不足時の対応手順を定義]
```

### 2.2 01-team.mdの更新

#### 現状
```markdown
# チームルール設定
- 具体的なチーム名が含まれている
- 固定的なワークフロー記述
- 特定の環境依存
```

#### 更新後
```markdown
# チームルール設定

## 1. [チーム共通ルールセクション]

### 1.1 [確認対象定義]
[チーム共通のルールパスを定義]

### 1.2 [判定基準定義]
[チームルールの理解度基準を定義]

### 1.3 [重点項目定義]
[開発プラクティス/ワークフロー/コミュニケーション等を定義]

## 2. [エラー対応セクション]
[チームレベルでの問題解決プロセスを定義]
```

### 2.3 02-project.mdの更新

#### 現状
```markdown
# プロジェクトルール設定
- 静的なファイル構造記述
- 固定的なパス一覧
- 更新困難な構造
```

#### 更新後
```markdown
# プロジェクトルール設定

## 1. [ディレクトリ構造確認]
```bash
# 最新の構造を動的に確認
list_files docs/setup/cline/rules/detail --recursive
```

## 2. [ルール確認セクション]

### 2.1 [確認対象定義]
- basic/以下の最新ファイル（番号順）
- trigger-task/以下の最新ファイル（アルファベット順）

### 2.2 [理解度基準]
[プロジェクトルールの理解度判定基準を定義]
```

## 3. エラー防止メカニズム

### 3.1 ファイル構造の検証
```yaml
検証手順:
  前提確認:
    - ディレクトリの存在確認
    - 必須ファイルの確認
    - 命名規則の検証
  
  構造確認:
    - 階層の妥当性
    - ファイルの配置
    - 参照の整合性
```

### 3.2 テンプレート適用の検証
```yaml
検証項目:
  セクション構造:
    - 必須セクションの存在
    - 階層構造の正確性
    - インデントの一貫性
  
  抽象度:
    - 具体例の排除
    - 汎用的な記述
    - プレースホルダーの適切性
```

## 4. 期待される効果

### 4.1 テンプレートの改善
- 適切な抽象度の維持
- 再利用性の向上
- メンテナンス性の向上

### 4.2 動的構造把握
- 常に最新状態を反映
- 変更の即時検出
- 柔軟な対応

### 4.3 エラー防止強化
- 事前検証の徹底
- 問題の早期発見
- 修正コストの削減

## 5. 実装ステップ

1. テンプレートの更新
   - 00-personal.mdの抽象化
   - 01-team.mdの抽象化
   - 02-project.mdの動的化

2. 検証の実施
   - ファイル構造の確認
   - テンプレート適用の確認
   - エラー検出の確認

3. フィードバックと調整
   - 実運用での検証
   - 問題点の特定
   - 継続的な改善