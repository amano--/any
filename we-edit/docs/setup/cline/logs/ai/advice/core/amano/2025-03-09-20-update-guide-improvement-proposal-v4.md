# [修正案] AI用 .clinerules 作成計画書の作り方

## 1. 変更内容

-   個人ルールの確認をスキップする。
-   チームルールの確認対象を、`docs/setup/cline/rules/01-team.md`に限定する。
-   計画書の構造を簡素化する。

## 2. 変更理由

-   手順を簡素化し、効率を向上させるため。
-   ユーザーの意向を反映するため。

## 3. 影響範囲

-   `docs/setup/cline/update-guide/ai/create-clinerules-plan.md`

## 4. 期待される効果

-   計画書作成時間の短縮
-   計画書の可読性の向上
-   ユーザーの満足度向上

## 5. 修正後の計画書

```markdown
# AI用 .clinerules 作成計画書の作り方

## 0. 重要な前提

-   計画書は作業開始前に必ず作成すること
-   各階層のルールの理解度を確認すること
-   ルール間の関係性を把握すること

## 1. 理解度確認プロセス

### 1.0 計画書作成の前提確認

#### 1.0.1 ファイル構造の確認

1.  detail/ディレクトリの最新状態確認

    ```bash
    list_files docs/setup/cline/rules/detail --recursive
    ```

2.  ディレクトリ構造の把握

    ```mermaid
    graph TD
        B[チームルール<br>01-team.md] -->|チーム要素| D[計画書]
        C[プロジェクトルール<br>02-project.md] -->|プロジェクト要素| D
        D -->|反映| E[プレビュー]
    ```

3.  サブディレクトリの確認

    ```bash
    list_files docs/setup/cline/rules/detail/basic
    list_files docs/setup/cline/rules/detail/trigger-task
    ```

#### 1.0.2 エラー防止の基本方針

```yaml
検証ポイント:
  構造検証:
    - ディレクトリ構造の整合性
    - ファイルの存在確認
    - 命名規則の遵守
  内容検証:
    - セクション構造の確認
    - 必須要素の確認
    - 参照の正確性
  更新管理:
    - 変更の記録
    - バックアップの作成
    - 履歴の保持
```

### 1.1 メンバールール確認（スキップ）
+++
（ユーザーの意向により、個人ルールの確認はスキップする。）
+++

### 1.2 チームルール確認（次優先）

1.  確認対象
+++
    ```bash
    read_file docs/setup/cline/rules/01-team.md
    ```
+++

2.  確認基準

    -   `docs/setup/cline/rules/01-team.md`に記載されている基準に従う

3.  重点項目
+++
    -   チーム開発プラクティス
    -   チームワークフロー
    -   コミュニケーションルール
+++

### 1.3 プロジェクトルール確認（基盤）

1.  確認対象

    ```bash
    list_files docs/setup/cline/rules/detail/
    ```

2.  確認基準

    -   AIがプロジェクトルールを完全に理解している場合
        → そのまま作業を開始してよい

    -   AIがプロジェクトルールを部分的にしか理解していない場合
        → 理解が不足している部分を再読了してから作業を開始すること

    -   AIがプロジェクトルールをほとんど理解していない場合
        → ドキュメント全体を再読了してから作業を開始すること

3.  重点項目
    -   プロジェクト方針
    -   セキュリティ要件
    -   標準プラクティス

## 2. 計画書の構造

### 2.1 前提確認セクション

```markdown
# .clinerules 作成計画書

## 1. 理解度確認状況

### 1.1 メンバールール
-   確認状況：スキップ（ユーザーの意向により）
-   理解度：スキップ
-   特記事項：ユーザーの意向により、個人ルールの確認はスキップする

### 1.2 チームルール
-   確認状況：未確認
-   理解度：未確認
-   特記事項：

### 1.3 プロジェクトルール
-   確認状況：確認済み
-   理解度：確認済み
-   特記事項：`docs/setup/cline/rules/detail`ディレクトリのファイル一覧を確認

## 2. 作業計画

### 2.1 情報収集フェーズ

-   チームルール確認手順: `docs/setup/cline/rules/01-team.md`の内容を確認
-   プロジェクトルール確認手順: `docs/setup/cline/rules/detail`ディレクトリのファイル一覧を確認

### 2.2 設計フェーズ

-   .clinerules構造設計: 手順書（docs/setup/cline/update-guide/ai/create-clinerules-plan.md）の構造を参考に、.clinerules の構造を設計
-   設定項目の整理: 各ルールファイルから設定項目を整理
-   依存関係の分析: 各設定項目の依存関係を分析

### 2.3 検証フェーズ

-   セキュリティ検証計画: セキュリティに関する設定項目の検証計画
-   機能検証計画: 各機能が正しく動作することを確認する検証計画

### 2.4 バイリンガル対応計画

-   言語バージョン管理: 日本語版（.clinerules.ja）と英語版（.clinerules）の管理
-   品質管理: 内容の一貫性、文脈の保持、技術用語の統一
-   英語版（.clinerules）: トークン削減アプローチ、文脈維持戦略、技術用語の扱い
```

## 3. 検証計画

### 3.1 理解度の確認

-   メンバールールの理解度: スキップ
-   チームルールとの整合性: チームルール確認後に実施
-   プロジェクトルールの遵守: プロジェクトルール確認後に実施

### 3.2 機能の確認

-   設定の動作確認: 各設定項目が正しく動作することを確認
-   エラー検出: エラーが発生しないことを確認
-   パフォーマンス確認: パフォーマンスへの影響を確認

## 4. エラー防止メカニズム

### 4.1 確認ポイント

1.  作業開始時
    -   各階層のルール理解度: スキップ
    -   ルール間の関係性: 各ルール確認後に実施
    -   作業環境の準備: 作業環境が整っていることを確認
2.  作業中
    -   理解度の維持確認: スキップ
    -   エラーの早期検出: 検証フェーズで実施
    -   問題の即時報告: 問題が発生した場合は、速やかに報告
3.  完了時
    -   全項目の確認: 全ての項目が正しく設定されていることを確認
    -   整合性の検証: 各ルール間の整合性を検証
    -   承認の取得: ユーザーの承認を取得
```

### 4.2 エラー対応

1.  理解度不足: スキップ
2.  矛盾検出: 矛盾が検出された場合は、原因を調査し、解決策を提示
3.  バイリンガル対応のエラー防止: 日本語版と英語版の整合性を確認