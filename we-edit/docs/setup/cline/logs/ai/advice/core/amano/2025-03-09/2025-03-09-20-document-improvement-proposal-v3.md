# 手順書とテンプレート改善提案 v3

## 1. 現状の課題

### 1.1 ファイル構造確認の問題
- 静的なファイル構造の記述
- 最新状態の反映が不足
- 柔軟性の欠如

### 1.2 テンプレート構造の問題
- 抽象度が不適切
- 具体例との混同
- 汎用性の不足

## 2. 改善提案

### 2.1 update-clinerules.mdの改善

#### 2.1.1 ファイル構造確認の動的化

```markdown
### 1.0.1 ファイル構造の確認

AIはプロジェクトルール確認時に以下を実行すること：

1. detail/ディレクトリの最新状態確認
   ```
   # 最新のファイル構造を確認
   list_files docs/setup/cline/rules/detail --recursive
   ```

2. 構造の分析
   - basic/とtrigger-task/の内容を確認
   - 新規追加ファイルの検出
   - 削除されたファイルの把握

3. パスの列挙
   - basic/以下は番号順に列挙
   - trigger-task/以下はアルファベット順に列挙
```

### 2.2 ルールテンプレートの抽象化

00-personal.mdの更新

#### 2.2.1 個人ルールテンプレート構造

```markdown
# 個人ルール設定

## 1. [理解度確認セクション]

### 1.1 [確認対象定義]
[メンバー固有のルールパスを定義]

### 1.2 [判定基準定義]
[完全理解/部分理解/不十分の基準を定義]

### 1.3 [重点項目定義]
[環境設定/ワークフロー/プラグイン等の項目を定義]

## 2. [階層定義セクション]
[個人/チーム/プロジェクトの各階層の関係を定義]

## 3. [エラー対応セクション]
[理解度不足時の対応手順を定義]
```

#### 2.2.2 チームルールテンプレート構造

```markdown
# チームルール設定

## 1. [チーム共通ルールセクション]

### 1.1 [確認対象定義]
[チーム共通のルールパスを定義]

### 1.2 [判定基準定義]
[チームルールの理解度基準を定義]

### 1.3 [重点項目定義]
[開発プラクティス/ワークフロー/コミュニケーション等を定義]

## 2. [エラー対応セクション]
[チームレベルでの問題解決プロセスを定義]
```

#### 2.2.3 プロジェクトルールテンプレート構造

```markdown
# プロジェクトルール設定

## 2. [ルール確認セクション]

### 2.1 [確認対象定義]
[detail/ディレクトリの最新構造を動的に確認]

### 2.2 [理解度基準]
[プロジェクトルールの理解度判定基準を定義]

### 2.3 [重点項目]
[メモリバンク/Git/セキュリティ等の項目を定義]
```

### 2.3 エラー防止の強化

#### 2.3.1 動的確認プロセス

```yaml
確認手順:
  前提チェック:
    - detail/ディレクトリの存在確認
    - 必須ファイルの存在確認
    - ファイル名規約の確認
  
  構造チェック:
    - ディレクトリ階層の妥当性
    - ファイルの配置位置
    - 命名規則の遵守
  
  内容チェック:
    - テンプレート構造の適用
    - 必須セクションの存在
    - 参照パスの正確性
```

## 3. 期待される効果

### 3.1 動的な構造把握
- 常に最新の状態を反映
- 変更の即時検出
- 柔軟な対応が可能

### 3.2 テンプレートの明確化
- 抽象度の適正化
- 汎用性の向上
- 再利用性の確保

### 3.3 エラー防止の強化
- 事前チェックの確実化
- 問題の早期発見
- 対応の標準化

## 4. 実装手順

### 4.1 手順書の更新
1. 動的確認プロセスの追加
2. テンプレート構造の明確化
3. エラー防止メカニズムの実装

### 4.2 移行計画
1. 既存ファイルの分析
2. 新フォーマットへの移行
3. 検証と調整

## 5. 判断を仰ぎたい点

1. 動的確認プロセスの妥当性
2. テンプレート抽象度の適切性
3. エラー防止方法の十分性