# プロンプト規則集

## 1. 本日の作業終了記録

### トリガーワードと条件

- トリガー: 「おつかれ」または「本日の作業の終了」
- 条件: 1日の作業の区切りとなる時点で実行

### 必須実行作業

1. 知見のまとめ作成

   ```
   場所: docs/logs/ai/knowledge/[開発フェーズ]/YYYY-MM/YYYY-MM-DD-[内容のタイトルの英名].md
   目的: 作業から得られた知見の詳細な記録
   条件: 必ず実施

   手順:
   1. まとめ作業前の振り返り
      - 実施した作業の全体像を確認
      - 重要な判断ポイントを列挙
      - 発生した課題を整理

   2. 熟考のプロセス
      - 各判断の根拠を深掘り
      - 選択肢と比較検討内容を整理
      - 得られた教訓を分析

   3. まとめ作成
      - 具体的な課題と解決策
      - 技術的な判断とその根拠
      - 改善案や代替案の検討内容
      - 次のステップへの提案
   ```

2. メモリバンクの更新

   ```
   対象:
   - systemPatterns.md: 新しいパターンの追加
   - activeContext.md: 現在のコンテキスト更新
   - progress.md: 進捗状況の更新
   条件: 必ず実施
   ```

3. Architecture Decision Record (ADR)

   ```
   場所: docs/logs/ai/adr/[開発フェーズ]/YYYY-MM/YYYY-MM-DD-[決定内容の英名].md
   目的: 重要な設計判断の記録
   条件: 以下の場合のみ作成
   - アーキテクチャに影響する決定
   - 重要なパターンや規約の変更
   - チーム間の協業方法の変更
   - システム全体に影響する技術選定
   ```

4. 週次作業ログの作成・更新
   ```
   場所: docs/logs/work-log/[YYYY]/YYYY-MM_[WEEKNUMBER].md
   目的: 実施タスク、成果物、課題の記録
   条件: 必ず実施
   記録内容:
   - 作業実施時間（HH:MM-HH:MM）
   - 作業内容の要約
   - 成果物への参照リンク
     - 作成した知見へのリンク
     - 作成したADRへのリンク（存在する場合）
   - 課題と次のステップ
   ```

### 作業終了処理の流れ

1. トリガーワード検出時

   - 本規則の確認
   - 実施すべき作業の特定

2. 知見のまとめ

   - 振り返りと熟考
   - 技術的な発見の詳細記録
   - 具体的な問題と解決策
   - 改善提案と根拠

3. メモリバンク更新

   - パターンの追加・更新
   - コンテキストの更新
   - 進捗の記録

4. ADR作成判断と作成

   - 必要性の確認
   - 該当する場合のみ作成

5. 週次作業ログ
   - 作業時間の記録
   - 作業内容の要約
   - 成果物への参照リンク
   - 課題と次のステップの記録

### エラー防止のためのチェックリスト

1. 前準備

   - [ ] 本規則の確認
   - [ ] 作業内容の整理

2. 作業実行時

   - [ ] 振り返りと熟考の実施
   - [ ] 知見のまとめ作成
   - [ ] メモリバンクの更新
   - [ ] ADR作成の要否判断
   - [ ] 週次作業ログの作成・更新

3. 完了確認
   - [ ] ファイルパスの正確性
   - [ ] 内容の網羅性
   - [ ] 関連ファイルの整合性
   - [ ] 作業時間の記録
   - [ ] 成果物へのリンク

## 2. 作業毎の注意点

### タスク終了時の処理

指示されたタスクが終了した場合、以下を実行してください：

1. タスク終了のコミット作成

   ```bash
   # コミットメッセージの形式
   feat/fix/refactor: タスクの概要

   - 変更点1
   - 変更点2

   影響範囲：
   - 影響を受けるコンポーネントや機能

   🤖 ${K4}で生成
   ```

## 3. ガイドライン改訂時の注意点

### トリガーワードと条件

- トリガー: 「ガイド改訂」
- 条件: ガイドラインの改訂が必要な時点で実行

### 改訂プロセス

1. 作業の振り返り

   - 実施した変更の確認
   - 得られた知見の整理
   - 課題点の抽出

2. 熟考フェーズ

   - 既存ガイドラインの理解
   - 改善ポイントの特定
   - 影響範囲の分析

3. 改訂ルール

   - 既存の段落構造を維持
   - 追記による更新を基本とする
   - 削除や大幅な変更は避ける

4. 品質確保
   - 一貫性の確認
   - 明確性の確保
   - トレーサビリティの維持

## 更新履歴

- 2025-03-07: 改訂

  - 作業毎の注意点を追加
  - ガイドライン改訂時の注意点を追加

- 2025-03-07: 改訂

  - 週次作業ログの位置を最後に変更
  - 作業時間記録の追加
  - 成果物へのリンク追加要件

- 2025-03-07: 改訂

  - 知見まとめ作成前の振り返り・熟考プロセスを追加
  - チェックリストの更新

- 2025-03-07: 改訂

  - ADR作成条件の明確化
  - 知見記録の詳細化要件追加
  - チェックリストの追加

- 2025-03-07: 初版作成
  - 基本的なルールの定義
  - 必須作業の明確化
  - エラー防止策の追加
