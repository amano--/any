# 記事カテゴリ設定ユースケース

## ユースケース概要

[会員]が記事に適切なカテゴリを設定し、体系的に管理するためのユースケース。

## アクター

- [会員]
- [システム]

## 事前条件

- アカウントが有効であること
- 記事が存在すること
- カテゴリが定義されていること

## 基本フロー

### シナリオ：記事のカテゴリ分類

テクノロジーライターの松田健一（42歳）は、クラウドコンピューティングに関する連載記事シリーズを、適切なカテゴリに分類して整理しようとしています。

記事は技術解説、ビジネス活用、セキュリティの観点を含んでおり、最適なカテゴリ選択が重要です。また、読者が関連記事を見つけやすいように、体系的な分類が必要です。

1. [会員]はカテゴリ選択画面を開く
2. [システム]はカテゴリツリーを表示
3. [会員]は以下の操作を実行
   - カテゴリツリーの探索
   - 「クラウドテクノロジー」を選択
   - サブカテゴリ「エンタープライズ」を選択
4. [システム]は入力検証サービスで検証
5. [会員]は選択を確認
6. [システム]はカテゴリ管理サービスで更新
7. [システム]は検索インデックスを更新
8. [システム]は完了を通知

## 代替フロー

### A1. 複数カテゴリの提案

3a. [システム]はカテゴリ提案サービスで候補を提示
4a. [会員]は推奨カテゴリから選択
5a. 基本フローの4に合流

### A2. カテゴリの新規リクエスト

3b. [会員]は新規カテゴリをリクエスト
4b. [システム]はカテゴリリクエストを作成
5b. [システム]はスタッフに通知
6b. 承認後、基本フローの3に戻る

## 例外フロー

### E1. 無効なカテゴリ

4e. [システム]は無効なカテゴリを検出
5e. [システム]は代替カテゴリを提案
6e. 基本フローの3に戻る

### E2. アクセス権限エラー

3e. [システム]は権限不足を検出
4e. [システム]は権限エラーを表示
5e. 基本フローを終了

## 事後条件

- カテゴリが設定されていること
- 検索インデックスが更新されていること
- 関連記事が正しく関連付けられていること

## 関連オブジェクト

- 記事情報
- カテゴリ情報
- カテゴリ選択機能
- カテゴリ管理サービス
- 検索インデックス
- カテゴリ提案サービス

## 補足情報

### カテゴリルール

1. 階層構造
   - 最大深さ：5階層
   - 1階層あたりの上限：50カテゴリ

2. 命名規則
   - 重複不可
   - 1-50文字
   - 予約語制限

### 権限管理

1. カテゴリ設定
   - 一般[会員]：既存カテゴリの選択のみ
   - 編集者：新規カテゴリのリクエスト可
   - スタッフ：カテゴリの作成・編集可

2. カテゴリ提案
   - AI基づく自動提案
   - 類似記事からの推奨
   - 履歴ベースの提案

### カテゴリツリー例

```
技術
├── クラウド
│   ├── パブリック
│   ├── プライベート
│   └── ハイブリッド
├── セキュリティ
│   ├── ネットワーク
│   └── アプリケーション
└── 開発
    ├── フロントエンド
    └── バックエンド
